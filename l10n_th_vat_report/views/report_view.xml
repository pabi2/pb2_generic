<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="report_vat">
            <t t-foreach="docs" t-as="o">
                <t t-call="report.internal_layout">
                    <div class="page">
                        <h2 class="text-center">
                            <span t-if="o.tax_id.type_tax_use == 'sale'">
                                Sale VAT Report
                            </span>
                            <span t-if="o.tax_id.type_tax_use == 'purchase'">
                                Purchase VAT Report
                            </span>
                        </h2>
                        <div class="row mt32 mb16">
                            <div class="col-xs-2" t-if="o.period_id" >
                                <span><b>Month:</b></span>
                            </div>
                            <div class="col-xs-4">
                                <span><t t-esc="o.period_id.name"/></span>
                            </div>
                            <div class="col-xs-1 " >
                                <span></span>
                            </div>
                            <div class="col-xs-5 " >
                                <span><b>Calender Year: &amp;nbsp;</b></span>
                                <span><t t-esc="get_year(o.period_id)"/></span>
                            </div>
                        </div>
                        <div class="row mt16 mb16">
                            <div class="col-xs-2" >
                                <span><b>Company:</b></span>
                            </div>
                            <div class="col-xs-4" style="border-bottom: 1px solid black;">
                                <span><t t-esc="o.company_id.name"/></span>
                            </div>
                            <div class="col-xs-1 " >
                                <span></span>
                            </div>
                            <div class="col-xs-2 " >
                                <span><b>Tax ID:</b></span>
                            </div>
                            <div class="col-xs-3" style="border-bottom: 1px solid black;">
                                <span><t t-esc="o.company_id.vat"/></span>
                            </div>
                        </div>
                        <div class="row mt16 mb16">
                            <div class="col-xs-2" >
                                <span><b>Branch:</b></span>
                            </div>
                            <div class="col-xs-4" style="border-bottom: 1px solid black;">
                                <span>&amp;nbsp;</span>
                            </div>
                            <div class="col-xs-1 " >
                                <span></span>
                            </div>
                            <div class="col-xs-2 " >
                                <span><b>Branch ID:</b></span>
                            </div>
                            <div class="col-xs-3" style="border-bottom: 1px solid black;">
                                <span>&amp;nbsp;</span>
                            </div>
                        </div>
                        <div class="row mt32 mb16">
                            <table class="table table-bordered">
                                <thead>
                                    <th class="text-center">#</th>
                                    <th class="text-center">Date</th>
                                    <th class="text-center">No.</th>
                                    <th class="text-center">Customer/Supplier Name</th>
                                    <th class="text-center">Tax ID</th>
                                    <th class="text-center">Base Amount</th>
                                    <th class="text-center">Tax Amount</th>
                                </thead>
                                <tbody>
                                    <t t-foreach="get_lines(o)" t-as="line">
                                        <tr>
                                            <td><span t-esc="line_index+1"/></td>
                                            <td><span t-esc="time.strftime('%d/%m/%Y ',time.strptime(line['date'],'%Y-%m-%d'))"/></td>
                                            <td><span t-esc="line['number']"/></td>
                                            <td><span t-esc="line['partner_name']"/></td>
                                            <td><span t-esc="line['tax_id']"/></td>
                                            <td class="text-right"><span t-esc="line['base_amount']"/></td>
                                            <td class="text-right"><span t-esc="line['tax_amount']"/></td>
                                        </tr>
                                    </t>
                                </tbody>
                                <tr>
                                    <t t-set="total" t-value="get_base_total(o)"/>
                                    <td colspan="5" class="text-right"><strong>Total</strong></td>
                                    <td class="text-right"><span t-esc="total['base_total']"/></td>
                                    <td class="text-right"><span t-esc="total['tax_total']"/></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </t>
            </t>
        </template>
    </data>
</openerp>